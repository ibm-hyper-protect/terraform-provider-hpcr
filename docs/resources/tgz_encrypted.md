---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "hpcr_tgz_encrypted Resource - hpcr"
subcategory: ""
description: |-
  Creates an encrypted TGZ archive from a folder containing Docker Compose or Podman configuration files.
---

# hpcr_tgz_encrypted (Resource)

Creates an encrypted TGZ (tar.gz) archive from a folder containing Docker Compose or Podman configuration files. This resource is typically used to package and encrypt the workload section of an HPCR contract.

## How It Works

This resource performs the following operations:

1. **Archive Creation**: Creates a TGZ archive of all files in the specified folder
2. **Encryption**: Encrypts the archive using the platform-specific encryption certificate via OpenSSL
3. **Encoding**: Base64-encodes the encrypted archive in the format: `hyper-protect-basic.<password>.<encrypted-data>`
4. **Checksums**: Computes SHA256 checksums for both the input folder and encrypted output

The encrypted output can be directly used in HPCR contracts without additional processing.

## Example Usage

```terraform
# Encrypt a Docker Compose folder
resource "hpcr_tgz_encrypted" "workload" {
  folder = "${path.module}/docker-compose"
  # cert defaults to the latest HPCR image certificate
  # platform defaults to "hpvs"
}

# Use in a contract
resource "hpcr_text_encrypted" "workload_section" {
  text = yamlencode({
    "compose" : {
      "archive" : resource.hpcr_tgz_encrypted.workload.rendered
    }
  })
}
```

## Example with Custom Certificate

```terraform
# Get a specific region's encryption certificate
data "hpcr_encryption_cert" "cert" {
  region = "eu-de"
}

resource "hpcr_tgz_encrypted" "workload" {
  folder   = "${path.module}/my-app"
  cert     = data.hpcr_encryption_cert.cert.cert
  platform = "hpvs"
}
```

## Folder Structure

Your folder should contain a valid Docker Compose or Podman configuration:

```
docker-compose/
├── docker-compose.yml
├── .env (optional)
└── other-config-files
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `folder` (String) Path to the folder to encrypt

### Optional

- `cert` (String) Certificate used to encrypt the JSON document, in PEM format. Defaults to the latest HPCR image certificate if not specified.
- `platform` (String) Hyper Protect platform where this contract will be deployed. Defaults to hpvs

### Read-Only

- `id` (String) Resource identifier
- `rendered` (String) Rendered output of the resource
- `sha256_in` (String) SHA256 of the input
- `sha256_out` (String) SHA256 of the output
